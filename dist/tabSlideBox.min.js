"use strict";function SimplePubSub(){var e={};return{on:function(t,n){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]),e[t].push(n)}),this},trigger:function(t,n){return angular.forEach(e[t],function(e){e.call(null,n)}),this}}}angular.module("tabSlideBox",[]).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]).directive("tabSlideBox",["$timeout","$window","$ionicSlideBoxDelegate","$ionicScrollDelegate",function($timeout,$window,$ionicSlideBoxDelegate,$ionicScrollDelegate){return{restrict:"A, E, C",link:function(e,t,n){function i(){var e=angular.element(r.querySelector(".tsb-icons")),t=e.find("a"),i=t.length;angular.forEach(t,function(e,t){var n=angular.element(e);n.on("click",function(){s.slide(t)}),n.attr("icon-off")&&n.attr("class",n.attr("icon-off"))});var a=n.tab;("undefined"==typeof n.tab||a>=i||0>a)&&(a=Math.floor(t.length/2)),0==a&&o(0),$timeout(function(){s.slide(a)},0)}function o(e){var t=angular.element(r.querySelector(".tsb-icons")),n=t.find("a"),i=t[0].querySelector(".tsb-ic-wrp"),o=i.querySelector(".scroll"),l=t[0].offsetWidth/2,c=angular.element(n[e]),s=angular.element(t[0].querySelector(".active"));if(c&&c.length){var d=c[0].offsetWidth,f=c[0].offsetLeft;s.attr("icon-off")?s.attr("class",s.attr("icon-off")):s.removeClass("active"),c.attr("icon-on")&&c.attr("class",c.attr("icon-on")),c.addClass("active");var g=l-f-d/2+5;if(o){var v=i.offsetWidth,$=Math.abs(a(o.style.webkitTransform)),h=100,p=40;(f+d+p>$+v||$>f-h)&&(g>0&&(g=0),u.scrollTo(Math.abs(g),0,!0))}else{var g=l-f-d/2+5+"px";i.style.webkitTransform="translate3d("+g+",0,0)"}}}function a(e){return e=e.replace("translate3d(",""),e=e.replace("translate(",""),parseInt(e)}var r=t[0],l=t;l.addClass("tabbed-slidebox"),"bottom"===n.tabsPosition&&l.addClass("btm");var c=r.querySelector(".slider").getAttribute("delegate-handle"),s=$ionicSlideBoxDelegate;c&&(s=s.$getByHandle(c)),e.ionicSlideBoxDelegate=s;var u=$ionicScrollDelegate;c&&(u=u.$getByHandle(c));var d=e.events;d.on("slideChange",function(e){o(e.index)}),d.on("ngRepeatFinished",function(){i()}),i()},controller:function($scope){$scope.events=new SimplePubSub,$scope.slideHasChanged=function(index){$scope.events.trigger("slideChange",{index:index}),$timeout(function(){$scope.onSlideMove&&$scope.onSlideMove({index:eval(index),handler:$scope.ionicSlideBoxDelegate})},100)},$scope.$on("ngRepeatFinished",function(e){$scope.events.trigger("ngRepeatFinished",{event:e})})}}}]);